#!/usr/bin/env python

import os
import sys

import beancount.ingest.extract
from beancount.ingest.importers import csv
from smart_importer import PredictPostings, apply_hooks
from smart_importer.detector import DuplicateDetector

beancount.ingest.extract.HEADER = ''

CONFIG = [
    # BOC Credit
    apply_hooks(csv.Importer(
        {
            csv.Col.DATE: '交易日期',
            csv.Col.NARRATION1: '对方账户名称',
            # csv.Col.NARRATION2: '附言',
            csv.Col.AMOUNT_DEBIT: '支出金额',
            csv.Col.AMOUNT_CREDIT: '收入金额'
        
        },
        account='Assets:Bank:BOC:Card0000',
        currency='CNY',
        regexps='网点名称',
        csv_dialect='excel-tab'
       # categorizer=guess.guess2]
    ), [DuplicateDetector(),PredictPostings()])
]
